// --------------------------------------
// Cart Model
// --------------------------------------

model Cart {
  id     String @id @default(uuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  // Relations: Changed from embedded type to One-to-Many model
  items CartItem[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("Cart")
}

// Converted from "type" to "model" for Postgres
model CartItem {
  id     String @id @default(uuid())
  cartId String
  cart   Cart   @relation(fields: [cartId], references: [id], onDelete: Cascade)

  variantId String
  variant   ProductVariant @relation(fields: [variantId], references: [id])

  quantity Int
  price    Float // Snapshot price

  @@map("CartItems")
}
